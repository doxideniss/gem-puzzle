!function(e){function t(t){for(var n,s,c=t[0],o=t[1],l=t[2],d=0,h=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);h.length;)h.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,c=1;c<i.length;c++){var o=i[c];0!==r[o]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},r={0:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;a.push([121,1]),i()}({121:function(e,t,i){i(122),i(309),e.exports=i(308)},308:function(e,t,i){},309:function(e,t,i){"use strict";function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.ctx=i,this.size=4,this.clicks=0,this.arr=[],this.mixedArr=[],this.started=!1}var t,i,r;return t=e,(i=[{key:"getClicks",value:function(){return this.clicks}},{key:"setSize",value:function(e){this.size=e,this.cellSize=this.canvas.width/this.size,this.clearCanvas(),this.clicks=0,this.started=!1,this.init()}},{key:"createArr",value:function(){var e=this.size*this.size;this.arr=new Array(e).fill(1).map((function(t,i){return i+1===e?0:i+1})),this.mixedArr=n(this.arr)}},{key:"mixArr",value:function(){this.mixedArr.sort((function(){return Math.random()-.5}))}},{key:"move",value:function(e,t){var i=this.getNullCellIndex(),n=i%this.size,r=Math.floor(i/this.size),a=this.size*Math.floor(t/this.cellSize)+Math.floor(e/this.cellSize),s=a%this.size,c=Math.floor(a/this.size);(a-1!==i&&a+1!==i||c!==r)&&(c-1!==r&&c+1!==r||s!==n)||(this.mixedArr[i]=this.mixedArr[a],this.mixedArr[a]=0,this.clicks+=1,this.moveAnimate(a,i,this.mixedArr[i]))}},{key:"moveAnimate",value:function(e,t,i){var n=this,r=e%this.size,a=Math.floor(e/this.size),s=t%this.size,c=Math.floor(t/this.size),o=0,l=0,u=this.cellSize/30,d=setInterval((function(){Math.abs(+o.toFixed(2))!==+n.cellSize.toFixed(2)&&Math.abs(+l.toFixed(2))!==+n.cellSize.toFixed(2)||clearInterval(d),n.ctx.clearRect(r*n.cellSize-1,a*n.cellSize-1,n.cellSize+2,n.cellSize+2),n.createEl(r,a,i,o,l),s-r>0?o+=u:s-r<0?o-=u:c-a>0?l+=u:c-a<0&&(l-=u)}),1)}},{key:"getNullCellIndex",value:function(){return this.mixedArr.findIndex((function(e){return 0===e}))}},{key:"draw",value:function(){var e=this,t=0,i=0;this.mixedArr.forEach((function(n,r){n>0&&e.createEl(t,i,n),t+=1,(r+1)%e.size==0&&(i+=1,t=0)}))}},{key:"createEl",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.ctx.fillStyle="#FFB93B",this.ctx.fillRect(e*this.cellSize+1+n,t*this.cellSize+1+r,this.cellSize-2,this.cellSize-2),this.ctx.font="bold ".concat(this.cellSize/2,"px Sans"),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle="#222",this.ctx.fillText(i,e*this.cellSize+n+this.cellSize/2,t*this.cellSize+r+this.cellSize/2)}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"newGame",value:function(){this.clicks=0,this.started=!0,this.mixArr(),this.clearCanvas(),this.draw()}},{key:"isWin",value:function(){for(var e=0;e<this.mixedArr.length;e+=1)if(this.mixedArr[e]!==this.arr[e])return!1;return!0}},{key:"isStarted",value:function(){return this.started}},{key:"setSavedGame",value:function(e){this.size=e.size,this.createArr(),this.mixedArr=e.mixedArr,this.clicks=e.clicks,this.started=!0,this.cellSize=this.canvas.width/this.size,this.canvas.height=this.cellSize*this.size,this.clearCanvas(),this.draw()}},{key:"init",value:function(){this.cellSize=this.canvas.width/this.size,this.canvas.height=this.cellSize*this.size,this.started=!1,this.createArr(),this.draw()}}])&&a(t.prototype,i),r&&a(t,r),e}(),c=["3x3","4x4","5x5","6x6","7x7","8x8"],o=function(){var e=document.querySelector(".info__time"),t=document.querySelector(".info__steps"),i=document.querySelector("#pause");t.innerText="0",e.innerText="00:00",i.innerText="Стоп"},l=function(e){document.querySelector(".info__time").innerText=e},u=function(e){document.querySelector(".info__steps").innerText=e},d={time:"00:00",date:null,isPause:!1,pause:function(){this.isPause=!0},resume:function(){this.isPause=!1},reset:function(){this.time="00:00",this.date=null,this.isPause=!1,clearInterval(this.timer)},createTimer:function(e){var t=this;this.time="00:00",this.date=e,clearInterval(this.timer),this.timer=setInterval((function(){if(!t.isPause){var e=t.date.getSeconds();t.date.setSeconds(e+1);var i=String(t.date.getMinutes()).padStart(2,"0"),n=String(t.date.getSeconds()).padStart(2,"0");t.time="".concat(i,":").concat(n),l(t.time)}}),1e3)}},h=function(e){document.querySelector(".canvas").addEventListener("click",(function(t){e.isStarted()&&(e.move(t.offsetX,t.offsetY),u(e.getClicks()),e.isWin()&&function(e){alert("Ура! Вы решили головоломку за ".concat(d.time," и ").concat(e.getClicks()," ходов")),e.init(),o(),d.reset()}(e))}))},f=function(){var e=document.createElement("div");e.classList.add("container");var t=document.createElement("h1");t.innerText="Пятнашки";var i=function(){var e=document.createElement("div");e.classList.add("control");var t=document.createElement("button"),i=document.createElement("button"),n=document.createElement("button"),r=document.createElement("button");return t.classList.add("btn"),t.id="start",t.innerText="Начать",i.classList.add("btn"),i.id="pause",i.innerText="Стоп",n.classList.add("btn"),n.innerText="Сохранить",n.id="save",r.classList.add("btn"),r.innerText="Результаты",e.append(t,i,n,r),e}(),n=function(){var e=document.createElement("div");e.classList.add("info");var t=document.createElement("p");t.innerText="Время: ";var i=document.createElement("span");i.classList.add("info__time"),i.innerText="00:00",t.append(i);var n=document.createElement("p");n.innerText="Ходов: ";var r=document.createElement("span");return r.classList.add("info__steps"),r.innerText="0",n.append(r),e.append(t,n),e}(),r=function(){var e=document.createElement("div");e.classList.add("mode"),e.innerText="Выбрать размер: ";var t=document.createElement("div");return t.classList.add("mode__box"),c.forEach((function(e){var i=document.createElement("button");i.classList.add("mode__btn"),i.innerText=e,t.append(i)})),e.append(t),e}(),a=document.createElement("canvas");a.classList.add("canvas"),e.append(t,i,n,a,r),document.body.append(e)};window.onload=function(){f();var e=document.querySelector(".canvas");e.width=.2*window.innerWidth,window.innerWidth<=1024&&(e.width=.7*window.innerWidth);var t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);var i,n=new s(e,t),r=localStorage.getItem("savedGame");r&&confirm("Хотите восстановить игру?")?(r=JSON.parse(r),d.createTimer(new Date(r.date)),n.setSavedGame(r),localStorage.removeItem("savedGame")):n.init(),u(n.clicks),l(d.time),i=n.size,document.querySelectorAll(".mode__btn").forEach((function(e){e.innerText.includes(i)&&e.classList.add("mode__btn_active")})),function(e){var t=document.querySelector("#start"),i=document.querySelector("#pause"),n=document.querySelector("#save");t.addEventListener("click",(function(){o(),d.createTimer(new Date(0,0)),e.newGame()})),i.addEventListener("click",(function(){"00:00"!==d.time&&("Стоп"===this.innerText?(d.pause(),this.innerText="Возобновить"):(d.resume(),this.innerText="Стоп"))})),n.addEventListener("click",(function(){if(e.isStarted()){var t={date:d.date,mixedArr:e.mixedArr,size:e.size,clicks:e.clicks};localStorage.setItem("savedGame",JSON.stringify(t))}}))}(n),function(e){document.querySelector(".mode").addEventListener("click",(function(t){if(t.target.classList.contains("mode__btn")&&!t.target.classList.contains("mode__btn_active")){document.querySelector(".mode__btn_active").classList.remove("mode__btn_active"),t.target.classList.add("mode__btn_active");var i=t.target.innerText[0];e.setSize(i),d.reset(),o()}}))}(n),h(n)}}});